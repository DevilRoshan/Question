## UseHook

> 本文不涉及详细API的介绍，阅读此文章之前，强烈建议先阅读官方文档：https://zh-hans.reactjs.org/docs/hooks-reference.html

### 为什么要有HOOK

React的核心是由数据驱动页面渲染，这个驱动的过程是就是组件的编写过程，于是我们将页面不同的部分拆分为一个个组件，他们各自负责各自内部的数据驱动。

但种模式有着2个问题，就是数据共享和组件复用，react也提供了相关的解决方法：

* 数据共享，`flux/redux`，单向数据流。
* 组件复用，`HOC`，`Render Props`，`Function Component + Hooks`。

接下来，简单介绍一下上述的三种组件复用方式以及利弊：

#### HOC

高阶组件的方式对某些业务逻辑和样式进行复用，其基本的书写过程，编写一个传入参数为组件，最后返回结果为组件的函数`(Component) => Component `函数内部可以对组件进行业务逻辑和样式的封装。

##### 优点

* 有很强的自由度，书写方式随心所欲

##### 缺点

* 每次高阶组件的调用都会产生新的组件实例
* 如果业务逻辑拆分过细就需要包裹多个高阶组件，包裹过多就会带来另外额外的心智负担处理相关问题，比如：props覆盖和传入props的嵌套

####Render Props

通过props传入一个render方法或者组件包裹使用`children`的方式，对某些逻辑进行复用。通俗来说，就是将一个返回dom的方法传入某一个复用的组件，在那个复用的组件中调用这个方法来生成相关的dom

##### 优点

#### Function Component + Hooks

将UI和处理UI的逻辑分离，用自定义hook实现业务逻辑的复用。基本流程就是，编写一个自定义hook来控制部分状态，并且在组件中使用这个自定义hook来控制UI渲染。就比如，你需要一个状态控制是否显示图标，这个状态就可以由一个自定义hook返回。

##### 优点

* 将业务逻辑拆分的更细致，更利于复用

##### 缺点

* 抽离业务逻辑会带来额外的心智负担

所以`Hooks`的出现是为了与`Function Component`一起使用，解决组件复用(尤其是处理数据逻辑复用)问题的一种完成组件的方案。

### 什么是HOOK

#### 闭包



### HOOK API



#### useState



#### useEffect



#### useReducer



#### useCallBack



#### useMemo



#### useRef



### 一定要看的注意点



#### 引用类型的处理



#### 状态存储更新





